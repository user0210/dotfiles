#!/bin/sh

 ## wallpaper
hsetroot -fill /home/philipp/.config/X11/xfiles/background/wallpapers/city.jpg
#nice -n 15 xwinwrap -b -s -fs -st -sp -un -nf -ov -fdt -- gifview -w WID /home/philipp/.config/X11/xfiles/background/paperview/pixels11/1366x768.gif -a #nice -n 15 xwinwrap -b -s -fs -st -sp -un -nf -ov -fdt -- gifview -w WID /home/philipp/.config/X11/xfiles/background/paperview/pixels12/1366x768.gif -a #nice -n 15 xwinwrap -b -s -fs -st -sp -un -nf -ov -fdt -- gifview -w WID /home/philipp/.config/X11/xfiles/background/paperview/pixels13/1366x768.gif -a #nice -n 15 xwinwrap -b -s -fs -st -sp -un -nf -ov -fdt -- gifview -w WID /home/philipp/.config/X11/xfiles/background/paperview/gif8/1366x768.gif -a #nice -n 15 xwinwrap -b -s -fs -st -sp -un -nf -ov -fdt -- gifview -w WID $(cat ${HOME}/.config/X11/xfiles/templer/gif) -a 2> /dev/null &

 ## compositor
picom --experimental-backends --blur-method dual_kawase &

  ## startup-screen
xbanish -a &
st -g 80x30+350+150 -e cbonsai -plt 0,005 -m " DWM" &
sleep 5 && killall cbonsai 2> /dev/null
killall xbanish

  ## statusbar
internetav &
dwmblocks &
sh -c 'sleep 10 && kill -44 $(pidof dwmblocks)' & # update-counter

  ## polkit authentication agent
/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &

  ## set alsa-audio on startup with pulseaudio (not pipewire)
#audiosel alsa &

  ## hide cursor
#xbanish -m se -i mod4 &
xbanish -i mod4 &

  ## notification
rm /tmp/notify
touch /tmp/notify
tiramisu -o "^c$(mondo get base08)^[#source]^d^ -- #summary -- #body" | while read -r notification; do
	echo $notification >> /tmp/notify
	xsetroot -name "msg: $notification"
done &

  ## systray-applications
#suckless-python-menu 2> /dev/null & sleep 1 && nm-applet &
suckless-yad-menu 2> /dev/null && sleep 1 && nm-applet &

  ## dwm
rm ${HOME}/.cache/dwm.log
while true; do
      ## Log stderror to a file 
    dwm 2> ${HOME}/.cache/dwm.log
      ## No error logging
    # dwm >/dev/null 2>&1
done
