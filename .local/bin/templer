#!/bin/bash

createbasecolors() {

	fileorpath=$1
	for f in $fileorpath; do
	    col0=$(grep "color0" $2 | grep -o "#......")
	    col7=$(grep "color7" $2 | grep -o "#......")
	    col8=$(grep "color8" $2 | grep -o "#......")
	    col15=$(grep "color15" $2 | grep -o "#......")
	    light=$(colort -c $col0 && printf 0 || printf 1)
		if [ "$light" -eq 0 ]; then
	        col0a=$(colort -l -15 $col0)
	        col8a=$(colort -l -30 $col8)
	        col7a=$(colort -l 30 $col7)
	        col15a=$(colort -l 15 $col15)
	    else
	        col0a=$(colort -l 15 $col0)
	        col8a=$(colort -l 30 $col8)
	        col7a=$(colort -l -30 $col7)
	        col15a=$(colort -l -15 $col15)
	    fi
		echo "base00 : $col0"
echo "base01 : $col0a"
		echo "base02 : $col8"
		echo "base03 : $col8a"
		echo "base04 : $col7a"
		echo "base05 : $col7"
		echo "base06 : $col15a"
		echo "base07 : $col15"
	done
}

createdarkcolors() {

	fileorpath=$1
	for f in $fileorpath; do
	    col0=$(grep "^base00" $f | grep -o "#......")
	    col8=$(grep "^base08" $f | grep -o "#......")
	    col9=$(grep "^base09" $f | grep -o "#......")
	    colA=$(grep "^base0A" $f | grep -o "#......")
	    colB=$(grep "^base0B" $f | grep -o "#......")
	    colC=$(grep "^base0C" $f | grep -o "#......")
	    colD=$(grep "^base0D" $f | grep -o "#......")
	    colE=$(grep "^base0E" $f | grep -o "#......")
	    colF=$(grep "^base0F" $f | grep -o "#......")
	    light=$(colort -c $col0 && printf 0 || printf 1)
		if [ "$light" -eq 0 ]; then
	        col8a=$(colort -l -32 $col8)
	        col9a=$(colort -l -32 $col9)
	        colAa=$(colort -l -32 $colA)
	        colBa=$(colort -l -32 $colB)
	        colCa=$(colort -l -32 $colC)
	        colDa=$(colort -l -32 $colD)
	        colEa=$(colort -l -32 $colE)
	        colFa=$(colort -l -32 $colF)
	    else
	        col8a=$(colort -l 32 $col8)
	        col9a=$(colort -l 32 $col9)
	        colAa=$(colort -l 32 $colA)
	        colBa=$(colort -l 32 $colB)
	        colCa=$(colort -l 32 $colC)
	        colDa=$(colort -l 32 $colD)
	        colEa=$(colort -l 32 $colE)
	        colFa=$(colort -l 32 $colF)
	    fi
	    echo "base08a : $col8a"
	    echo "base09a : $col9a"
	    echo "base0Aa : $colAa"
	    echo "base0Ba : $colBa"
	    echo "base0Ca : $colCa"
	    echo "base0Da : $colDa"
	    echo "base0Ea : $colEa"
	    echo "base0Fa : $colFa"
	done
}

templer_menu() {
	theme=$(ls ${HOME}/.config/mondo/themes | grep "^[^._]" | fzf)
	mondo -a $theme
}


case "$1" in
	color)	createdarkcolors $2 ;;
	base)	createbasecolors $2 ;;
	*)		templer_menu ;;
esac
